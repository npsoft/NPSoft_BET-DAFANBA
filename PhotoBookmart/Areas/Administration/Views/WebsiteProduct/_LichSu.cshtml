@model List<DoiTuong_BienDong>
<script>
    jQuery(document).ready(function ($) {
        $popup_lich_su.find("#ListTable [data-action='delete']").click(function (e) {
            var $tr = $(this).closest("tr");
            var page = $popup_lich_su.find(".dataTables_wrapper .dataTables_paginate .paginate_active").text();
            if (confirm("Bạn chắc chắn muốn xóa biến động này?")) {
                $.post("@Url.Action("LichSu_Delete", "WebsiteProduct", new { })", { Id: $tr.attr("data-id") }, function (data) {
                    if (data != null && data.Status == "error") {
                        notify_error("Lỗi", data.Message);
                    } else {
                        notify_info("Thông báo", "Xóa biến động thành công.");
                        $.post("@Url.Action("LichSu", "WebsiteProduct", new { })", { Id: @ViewData["Id"] }, function (data) {
                            $popup_lich_su.html(data);
                            var $btn = $popup_lich_su.find(".dataTables_wrapper .dataTables_paginate").find(".paginate_button, .paginate_active").filter(function () { return $(this).text() == page; });
                            if ($btn.length == 0) { $btn = $popup_lich_su.find(".dataTables_wrapper .dataTables_paginate .last"); }
                            $btn.trigger("click");
                        });
                    }
                });
            }
        });

        if($.fn.dataTable) {
            $popup_lich_su.find("#ListTable").dataTable({
                "bSort": false,
                "sDom": 'C<"">lfrtip',
                "oColVis": {
                    "buttonText": "<i class='icol-accept'></i> Change columns",
                    "bRestore": false,
                    "sSize": "css"
                },
                "aoColumnDefs": [
			        { "bVisible": false, "aTargets": [2, 4, 8] }
                ],
                sPaginationType: "full_numbers",
                "aLengthMenu": [30, 50, 100]
            });
        }
    });
</script>
<table class="mws-table" id="ListTable">
    <thead>
        <tr>
            <th>Mã</th>
            <th>Mã HC</th>
            <th>Tên HC</th>
            <th>Mã loại</th>
            <th>Tên loại</th>
            <th>TT</th>
            <th>Mô tả</th>
            <th>Ngày hưởng</th>
            <th>Mức chênh</th>
            <th>Mức trợ cấp</th>
            <th>Thao tác</th>
        </tr>
    </thead>
    <tbody>
        @foreach (DoiTuong_BienDong item in Model ?? Enumerable.Empty<DoiTuong_BienDong>())
        {
            <tr data-id="@item.Id">
                <td style="text-align:center;">
                    <span>@item.Id</span>
                </td>
                <td style="text-align:center;">
                    <span>@item.MaHC</span>
                </td>
                <td style="text-align:left;">
                    <span>@item.MaHC_Ten</span>
                </td>
                <td style="text-align:center;">
                    <span>@item.MaLDT</span>
                </td>
                <td style="text-align:left;">
                    <span>@item.MaLDT_Ten</span>
                </td>
                <td style="text-align:center;">
                    <span>@item.TinhTrang</span>
                </td>
                <td style="text-align:left;">
                    <span>@item.MoTa</span>
                </td>
                <td style="text-align:center;">
                    <span>@string.Format("{0:dd/MM/yyyy}", item.NgayHuong)</span>
                </td>
                <td style="text-align:right;">
                    <span>@item.MucChenh.Value.ToString("#,000.00")</span>
                </td>
                <td style="text-align:right">
                    <span>@item.MucTC.Value.ToString("#,000.00")</span>
                </td>
                <td style="text-align:center;" class="no_padding">
                    <span class="btn-group">
                        @if (item.CanDelete)
                        {
                            <a rel="delete" href="javascript:void(0);" class="btn btn-small" title="Xóa biến động" data-action="delete">
                                <i class="icon-trash"></i>
                            </a>
                        }
                    </span>
                </td>
            </tr>
        }
    </tbody>
</table>
