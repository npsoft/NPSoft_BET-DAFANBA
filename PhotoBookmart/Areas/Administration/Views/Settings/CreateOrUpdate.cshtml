@model Settings
@{
    ViewBag.Title = Model.Id > 0 ? "CS Thiết lập" : "TM Thiết lập";
}
<script>
    jQuery(document).ready(function ($) {
        $(".ab-save").click(function () {
            $("#isContinue").val(false);
        });

        $(".ab-save-add-new").click(function () {
            $("#isContinue").val(true);
        });

        $("[type='reset']").on("click", function (e) {
            setTimeout(function () {
                $("#Key").trigger("change");
            }, 100);
        });

        $("#UserForm").submit(function () {
            if ($.trim($("#Key").val()) == "NONE") {
                notify_error("Lỗi", "Vui lòng chọn mã.");
                $("#Key").focus();
                return false;
            }

            if ($("#Value").val() == "") {
                notify_error("Lỗi", "Vui lòng nhập giá trị.");
                $("#Value").focus();
                return false;
            }
        });
    });
</script>
<div class="head">
    <h3>@{ if (Model.Id > 0) { <text>Chỉnh sửa thiết lập - @Model.Key</text> } else { <text>Thêm mới thiết lập</text> }}</h3>
</div>
<div class="mws-panel grid_8">
    <div class="mws-panel-header">
        <span>Thông tin</span>
    </div>
    <div class="mws-panel-body no-padding">
        @using (Html.BeginForm("CreateOrUpdate", "Settings", FormMethod.Post, new { enctype = "multipart/form-data", @id = "UserForm", @class = "mws-form" }))
        {
            if (ViewBag.Error != null)
            {
                <div class="mws-form-message error">@ViewBag.Error</div>
            }
            <div class="mws-form-inline">
                @Html.HiddenFor(m => m.Id)
                <input type="hidden" id="isContinue" name="isContinue" value="false" />
                <div class="mws-form-row">
                    <label class="mws-form-label">Mã</label>
                    <div class="mws-form-item">
                        @Html.DropDownListFor(m => m.Key, new SelectList(PhotoBookmart.Areas.Administration.Controllers.SettingsController.Settings_Key_GetAll(), "Id", "Name", "NONE"), new { @class = "large mws-select2" })
                    </div>
                </div>
                <div class="mws-form-row">
                    <label class="mws-form-label">Giá trị</label>
                    <div class="mws-form-item">
                        @Html.TextBoxFor(m => m.Value, new { @class = "large" })
                    </div>
                </div>
                <div class="mws-form-row">
                    <label class="mws-form-label">Mô tả</label>
                    <div class="mws-form-item">
                        @Html.TextAreaFor(m => m.Desc, new { @class = "large" })
                    </div>
                </div>
            </div>
            <div class="mws-button-row">
                <input type="submit" value="Lưu lại" class="btn btn-danger ab-save" />
                <input type="submit" value="Lưu lại & Thêm mới" class="btn btn-danger ab-save-add-new" />
                <input type="reset" value="Làm mới" class="btn btn-default ab-reset" />
            </div>
        }
    </div>
</div>
